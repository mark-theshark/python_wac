version: 0.1
workspace:
  type: "kubernetes"
  spec:
    image: index.docker.io/marktmilligan/python3-pycharm:vsix
    container-based-vm: false
    cpu: 4
    memory: 8 
    disk: 10
    labels:
      com.coder.custom.python.version: "3.8.5"
      com.coder.custom.pycharm.version: "2021.1.1"    
      com.coder.custom.chargeback: "datascience_groupb25"
  configure:
    start:
      - name: install 1 vscode extensions (vsix) from open vsx
        directory: /home/coder/
        shell: /bin/bash
        command: SERVICE_URL=https://open-vsx.org/vscode/gallery ITEM_URL=https://open-vsx.org/vscode/item /opt/coder/code-server/bin/code-server --install-extension ms-python.python        
      - name: install 2 vscode extensions (vsix) from image
        directory: /home/coder/
        shell: /bin/bash
        command: |
          /opt/coder/code-server/bin/code-server --install-extension /vsix/ms-toolsai.jupyter.2020.12.1.vsix
          /opt/coder/code-server/bin/code-server --install-extension /vsix/dongli.python-preview-0.0.4.vsix  
      - name: install python packages
        directory: /home/coder/
        shell: /bin/bash
        command: |
          sudo pip3 install pandas
          sudo pip3 install scikit-learn
          sudo pip3 install matplotlib
          sudo pip3 install flask
          sudo pip3 install django
          sudo pip3 install pyyaml
          sudo pip3 install scipy          
      - name: install vim editor
        directory: /home/coder/
        shell: /bin/bash
        command: sudo apt install vim                          
  devURLs:
    - name: testapp
      port: 3000
      scheme: http
      access: org